# 🏥 醫療文件管理系統 - 操作指南 (簡易版)

歡迎使用本系統。這是一個讓**民眾**與**醫護人員**協作的平台。
無需安裝軟體，請直接使用電腦的瀏覽器（如 Chrome, Edge）開啟網頁即可使用。

---

## ⚠️ 重要提醒：關於「安全鑰匙 (Token)」

為了保護資料隱私，系統不會儲存您的密碼。每次「上傳檔案」時，系統會跳出視窗詢問您的 **GitHub Token**。

* **這是什麼？** 這是一串 `ghp_` 開頭的亂碼，代表您的身分證與鑰匙。
* **怎麼用？** 當視窗跳出時，請直接貼上這串亂碼並按下確定。

---

## 👤 病人端 (使用者介面)

**檔案名稱：** `DocumentReference_user.html`
**功能權限：** ✅ 新增上傳、✅ 查詢列表 (無法修改)

### 1. 【建立】如何上傳我的報告？

如果您手上有紙本報告的照片、轉診單或藥袋說明，請依照以下步驟上傳：

1. **填寫資料**：輸入您的「病人 ID」與「文件標題」（例如：1月份健檢）。
2. **選擇分類**：在「文件類型」選單中，選擇適合的項目（如：診斷證明書）。如果不確定，請選「預設 (個人上傳)」。
3. **選取檔案**：點擊按鈕，從電腦中選擇要上傳的照片或 PDF。
4. **執行上傳**：按下藍色按鈕，貼上您的 Token。看到綠色勾勾 ✅ 代表成功！

### 2. 【查詢】如何查看我的紀錄？

* **自動顯示**：只要您打開網頁，下方列表會自動列出所有屬於您的文件。
* **檢視檔案**：點擊列表右側的 **「查看」** 連結，即可開啟原始檔案。

---

## 🩺 醫護端 (專業人員介面)

**檔案名稱：** `DocumentReference_doctor.html`
**功能權限：** ✅ 臨床建檔、✅ 科別篩選、✅ 修改狀態

### 1. 【建立】如何替病人建檔？

醫護人員上傳時需填寫更精確的臨床資訊，以便後續管理：

1. **必填欄位**：
* **文件類型 (Type)**：請從選單選取（如：檢驗報告 Lab Report）。
* **所屬科別 (Category)**：請務必正確歸類（如：心臟科 Cardiology），這會影響到後續的篩選功能。
* **狀態**：預設為「初稿 (Preliminary)」。


2. **上傳流程**：選好檔案後按下確認，並輸入 Token 即可完成建檔。

### 2. 【查詢】如何篩選特定科別的文件？

當病人資料太多時，您可以使用篩選功能：

* **操作方式**：在列表上方的選單中，選擇您要查看的科別（例如：**🫀 心臟科**）。
* **結果**：按下「刷新清單」，系統只會顯示心臟科相關的報告，其他科別（如骨科）會被暫時隱藏。

### 3. 【修改】如何更新報告狀態？

如果一份報告已經經由醫師確認，需要從「初稿」變更為「定稿」：

1. 找到該筆文件，點擊右側灰色的 **「修改」** 按鈕。
2. 在跳出的視窗中，將狀態更改為 **「最終 (Final)」**。
3. 您也可以在「臨床描述」欄位補上備註。
4. 按下更新，列表上的狀態標籤就會立刻改變顏色。

---

## ❓ 常見問題 (FAQ)

### 關於【建立 / 上傳】

**Q: 病人自己上傳的檔案，醫護人員看得到嗎？**

* **A:** 可以。只要「病人 ID」相同，醫護端切換到「🌐 顯示所有科別文件」時，就能看到病人上傳的資料。

**Q: 為什麼上傳時一直失敗，顯示 401 錯誤？**

* **A:** 這通常是 **Token (鑰匙)** 的問題。請檢查：
1. Token 是否過期？
2. 複製時是否少複製了字元？
3. 申請 Token 時是否有勾選 **`repo`** 權限？



### 關於【查詢 / 篩選】

**Q: 我明明上傳了檔案，為什麼選「心臟科」篩選時找不到？**

* **A:** 這表示您在上傳該檔案時，**「所屬科別」** 欄位可能選錯了（例如選成一般內科）。
* **解決方法**：請切換回「顯示所有文件」，找到該檔案，點擊「修改」並更正相關描述（或請工程師協助修正資料庫標籤）。

**Q: 在醫護端和病人端有什麽 API？**
* **A:**
* 醫護端：GET /DocumentReference?category:text=... (依照科別查詢)、GET /DocumentReference?subject=... （依照病人 ID 查詢)、POST /DocumentReference （建立 DocumentReference)、PUT /DocumentReference （修改 DocumentReference)
* 病人端：GET /DocumentReference?subject=Patient/1326 (依照病人本身的 ID 查詢)、POST /DocumentReference（建立 DocumentReference 上傳到 FHIR server, 同時把檔案儲存到 Github)
### 關於【修改】

**Q: 修改狀態後，病人端看得到改變嗎？**

* **A:** 看得到。病人端重新整理網頁後，雖然他們介面較簡單，但點開檔案內容或查看詳細資訊時，會是更新後的狀態。
